[colors]
background = #1e1e2e
background-alt = #2a2b3c
foreground = #e6e9ef

primary   = #f5c2e7
secondary = #89dceb
alert     = #f38ba8
disabled  = #6c7086

blue   = #89b4fa
green  = #a6e3a1
yellow = #f9e2af
orange = #fab387
purple = #cba6f7
red    = #f38ba8
teal   = #94e2d5
rose   = #f5c2e7
lavender = #b4befe

[bar/main]
monitor = ${env:MONITOR:}
monitor-strict = false
width = 100%
height = 18
radius = 0
offset-x = 0
offset-y = 0

background = ${colors.background}
foreground = ${colors.foreground}

line-size = 2pt
border-size = 0pt
border-color = #00000000

padding-left = 1
padding-right = 1
module-margin = 1
separator = ""
separator-foreground = ${colors.disabled}

font-0 = "JetBrainsMono Nerd Font:size=9;3"
font-1 = "Symbols Nerd Font:size=10;3"
font-2 = "Hack Nerd Font:size=10;3"
font-3 = Font Awesome 6 Brands:size=10

modules-left = launcher i3
modules-center = date firewall
modules-right = updates filesystem network vpn memory cpu pulseaudio backlight temperature power

cursor-click = pointer
cursor-scroll = ns-resize
enable-ipc = true

[module/launcher]
type = custom/text
content = 
content-foreground = ${colors.blue}
content-padding = 2
click-left = rofi -show drun
click-right = rofi -show run

[module/i3]
type = internal/i3
pin-workspaces = true
strip-wsnumbers = true
index-sort = true

; Map workspace numbers to icons
ws-icon-0 = 1;󰈹
ws-icon-1 = 2;
ws-icon-2 = 3;󰨞
ws-icon-3 = 4;󰭹
ws-icon-4 = 5;󰝚
ws-icon-5 = 6;󰈞
ws-icon-6 = 7;󰊪
ws-icon-7 = 8;󰊖
ws-icon-8 = 9;󰓫
ws-icon-9 = 10;

; Hide empty workspaces
show-urgent = true      ; Make sure this is true!
show-occupied = true
show-empty = false

; Focused workspace
label-focused = %icon%
label-focused-foreground = ${colors.background}
label-focused-background = ${colors.blue}
label-focused-padding = 2
label-focused-radius = 6
label-focused-font = 2

; Occupied workspace
label-occupied = %icon%
label-occupied-foreground = ${colors.foreground}
label-occupied-padding = 2
label-occupied-font = 2

; URGENT WORKSPACE - NOTIFICATIONS
; This activates when apps need attention (new messages, etc.)
label-urgent = %icon%         ; Added warning icon
label-urgent-foreground = ${colors.background}
label-urgent-background = ${colors.alert}
label-urgent-padding = 2
label-urgent-radius = 6
label-urgent-font = 2
; Optional: make it extra visible with borders
label-urgent-overline = ${colors.alert}
label-urgent-underline = ${colors.alert}

; Separator
label-separator = " "
label-separator-foreground = ${colors.disabled}

[module/updates]
type = custom/script
exec = checkupdates 2>/dev/null | wc -l | awk '{if ($1 > 0) print " " $1; else print ""}'
interval = 1800
format = <label>
label = %output%
label-foreground = ${colors.green}
label-padding = 1

[module/network]
type = internal/network
interface = wlan0
interval = 5
format-connected = <label-connected>
format-disconnected = <label-disconnected>
label-connected =   %essid% %local_ip%
label-connected-foreground = ${colors.teal}
label-disconnected =   Disconnected
label-disconnected-foreground = ${colors.disabled}

[module/vpn]
type = custom/script
exec = ~/.config/polybar/scripts/vpn_status.sh
interval = 5
format = <label>
label = %output%
label-foreground = ${colors.green}
label-padding = 1

[module/firewall]
type = custom/script
exec = ~/.config/polybar/scripts/firewall_status.sh
interval = 5  ; How often to check the status (in seconds)
; Click actions
click-left = ~/.config/polybar/scripts/firewall_toggle.sh
click-middle = ~/.config/polybar/scripts/show_rules.sh
click-right = ~/.config/polybar/scripts/show_ports.sh

; Optional: Styling
format = <label>
label = %output:0:40:...%
; You can also add different styles for ON/OFF states
; label-foreground = ${colors.foreground}
; label-background = ${colors.bg}

[module/pulseaudio]
type = internal/pulseaudio
format-volume = <label-volume>
label-volume =   %percentage%%
label-volume-foreground = ${colors.primary}
label-muted =   M
label-muted-foreground = ${colors.disabled}

[module/backlight]
type = custom/script
exec = brightnessctl g
interval = 1
scroll-up = brightnessctl set +5%
scroll-down = brightnessctl set 5%-
format =  <label>
label = %output%%

[module/memory]
type = internal/memory
interval = 2
format-prefix = " "
format-prefix-foreground = ${colors.purple}
label = %gb_used%/%gb_total%
label-foreground = ${colors.lavender}

[module/cpu]
type = internal/cpu
interval = 2
format-prefix = " "
format-prefix-foreground = ${colors.blue}
label = %percentage:2%%
label-foreground = ${colors.primary}

[module/temperature]
type = internal/temperature
thermal-zone = 0
warn-temperature = 80
format = <ramp> <label>
format-warn = <ramp> <label-warn>
format-prefix = ""
format-prefix-foreground = ${colors.orange}
label = %temperature-c%
label-warn = %temperature-c%
label-warn-foreground = ${colors.alert}
ramp-0 = 
ramp-1 = 
ramp-2 = 
ramp-3 = 
ramp-foreground = ${colors.orange}

[module/date]
type = internal/date
interval = 1
date =  %H:%M
date-alt =  %a %b %d %Y %H:%M:%S
label = %date%
label-foreground = ${colors.secondary}
label-padding = 2
click-left = gnome-calendar
click-right = gnome-control-center datetime

[module/power]
type = custom/text
content = 
content-foreground = ${colors.alert}
content-padding = 1
click-left = systemctl poweroff
click-right = systemctl reboot
click-middle = systemctl suspend

[module/disk]
type = internal/fs
mount-0 = /
mount-1 = /home
interval = 30
format-mounted = <label-mounted>
label-mounted =  %mountpoint%: %percentage_used%%
label-mounted-foreground = ${colors.green}
label-unmounted = %mountpoint% not mounted
label-unmounted-foreground = ${colors.disabled}

[module/filesystem]
type = internal/fs
mount-0 = /
mount-1 = /home
interval = 30
format-mounted = <label-mounted>
label-mounted =  %mountpoint%: %percentage_used%%
label-mounted-foreground = ${colors.green}

[settings]
screenchange-reload = true
pseudo-transparency = true
